import{e as h,r as s,c,a as l,b as _,B as N,j as m,i as x,v as p,t as b,o as v}from"./CRP4ui-9.js";import{a as S}from"./DZKyIIRX.js";import{F as V}from"./DSE9bvum.js";import{_ as k}from"./DlAUqK2U.js";const B={class:"form-container bg-white min-h-screen flex flex-col items-center pt-10"},D={class:"w-full max-w-3xl"},U={class:"bg-white shadow-xl rounded-2xl border border-gray-300 p-8 mt-8 animate-fade-in-up"},C={key:0,class:"text-red-500 text-center"},E=["disabled"],F={key:1,class:"text-green-600 text-center text-lg mt-2"},I=h({__name:"result",setup(T){const n=s(""),u=s(""),r=s(""),i=s(""),d=s(!1),f=s(!1),o=s(""),g=s(null);{const a=localStorage.getItem("growtrack-form");a&&(g.value=JSON.parse(a))}const y=()=>{const a=Number(u.value);return!n.value.trim()||!r.value.trim()||!i.value.trim()||!a||a<6||a>99?(o.value="Пожалуйста, заполните все поля корректно.",!1):/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(r.value)?(o.value="",!0):(o.value="Введите корректный email.",!1)},w=async()=>{var a,e;if(y()){d.value=!0,o.value="";try{const t={name:n.value,age:u.value,email:r.value,telegram:i.value,test:g.value};if(localStorage.setItem("growtrack-user",JSON.stringify(t)),(await S.post("/api/send-result",t,{headers:{"Content-Type":"application/json"}})).status===200)f.value=!0;else throw new Error("Ошибка при отправке.")}catch(t){o.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||t.message||"Ошибка отправки."}finally{d.value=!1}}};return(a,e)=>(v(),c("div",B,[l("div",D,[l("div",U,[e[4]||(e[4]=l("div",{class:"text-3xl font-bold mb-4 text-gray-900 text-center"},"Получить результат",-1)),e[5]||(e[5]=l("div",{class:"text-gray-700 text-center mb-8"},"Введите свои данные, чтобы получить персональный маршрут и PDF-отчёт.",-1)),l("form",{onSubmit:N(w,["prevent"]),class:"flex flex-col gap-6"},[m(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),type:"text",placeholder:"Имя",class:"input"},null,512),[[p,n.value]]),m(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),type:"number",min:"6",max:"99",placeholder:"Возраст",class:"input"},null,512),[[p,u.value]]),m(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),type:"email",placeholder:"Email",class:"input"},null,512),[[p,r.value]]),m(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),type:"text",placeholder:"Telegram (например, @username)",class:"input"},null,512),[[p,i.value]]),o.value?(v(),c("div",C,b(o.value),1)):x("",!0),l("button",{type:"submit",class:"bg-gradient-to-r from-purple-500 to-indigo-400 text-white shadow-md h-14 text-xl px-12 rounded-full font-semibold transition hover:from-indigo-400 hover:to-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-400 mt-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:d.value},b(d.value?"Отправка...":"Получить результат"),9,E),f.value?(v(),c("div",F,"Спасибо! Ваши данные отправлены.")):x("",!0)],32)])]),_(V,{class:"mt-16"})]))}}),$=k(I,[["__scopeId","data-v-f997f3f4"]]);export{$ as default};
